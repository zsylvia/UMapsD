function RDPGraph(){this.paths=[],this.markers=[]}function DictionaryPath(r,t,a){this.m1=r,this.m2=t,this.d=a}function DictionaryMarker(r,t,a){this.id=r,this.x=t,this.y=a}function convertMarkersAndPathsToJson(r,t){var a=new buckets.Dictionary,i=new RDPGraph;t.values().forEach(function(r){var t=new DictionaryMarker,e=new DictionaryMarker;t.id=r.marker1Data.id,null==a.set(r.marker1Data.id,"")&&(t.x=Math.floor(r.marker1Data.cx),t.y=Math.floor(r.marker1Data.cy)),e.id=r.marker2Data.id,null==a.set(r.marker2Data.id,"")&&(e.x=Math.floor(r.marker2Data.cx),e.y=Math.floor(r.marker2Data.cy)),i.paths[i.paths.length]=new DictionaryPath(t,e,Math.floor(r.distance))});var e=new buckets.Queue;for(r.forEach(function(r){r.values().forEach(function(r){e.enqueue(r)})});!e.isEmpty();){var n=e.dequeue();null==a.set(n.data(GlobalStrings.ID),"")&&(i.markers[i.markers.length]=new DictionaryMarker(n.data(GlobalStrings.ID),Math.floor(n.attr("cx")),Math.floor(n.attr("cy"))))}return i}function createAllMarkersFromJson(r,t){var a=new buckets.Dictionary;if(null!=r&&null!=t){var i=r;if(null!=i.markers){var e=8;try{e=markerSize}catch(n){"ReferenceError"==n.name||console.error(n.stack)}i.markers.forEach(function(r){var i=getTypeFromId(r.id),n=t.circle(r.x,r.y,e).attr({fill:markerTypeToColorMap.get(i)});n.data(GlobalStrings.ID,r.id),n.data(GlobalStrings.TYPE,i),i!=GlobalStrings.PATHWAY&&i!=GlobalStrings.PARKING_LOT&&i!=GlobalStrings.DORM&&i!=GlobalStrings.MISC&&(n.data(GlobalStrings.BUILDING,getBuildingFromId(r.id)),n.data(GlobalStrings.FLOOR,getFloorFromId(r.id))),a.set(n.data(GlobalStrings.ID),n)})}}return a}function createAllPathsFromJson(r,t){var a=new buckets.Dictionary;if(null!=r&&null!=t){var i=r;if(null!=i.paths){var e=4;try{e=pathStrokeWidth}catch(n){"ReferenceError"==n.name||console.error(n.stack)}var o=function(r,t,a,i){this.element=r,this.marker1Data=t,this.marker2Data=a,this.distance=i,this.toString=function(){return t.id+"<->"+a.id}},l=function(r,t,a,i,e,n){this.cx=r,this.cy=t,this.id=a,this.type=i,this.building=e,this.floor=n},s=function(r,t,a,i){var n=i.path("M"+r.cx+" "+r.cy+"L"+t.cx+" "+t.cy);n.attr("stroke-width",e);var l=new o(n,r,t,a);return l},c=function(r,t){var a,i=!1;return r.paths.forEach(function(r){if(!i)if(r.m1.id==t){var e=getTypeFromId(r.m1.id);a=e==GlobalStrings.PATHWAY?new l(r.m1.x,r.m1.y,r.m1.id,e):new l(r.m1.x,r.m1.y,r.m1.id,e,getBuildingFromId(r.m1.id),getFloorFromId(r.m1.id)),i=!0}else if(r.m2.id==t){var e=getTypeFromId(r.m2.id);a=e==GlobalStrings.PATHWAY?new l(r.m2.x,r.m2.y,r.m2.id,e):new l(r.m2.x,r.m2.y,r.m2.id,e,getBuildingFromId(r.m2.id),getFloorFromId(r.m2.id)),i=!0}}),a};i.paths.forEach(function(r){var e=s(c(i,r.m1.id),c(i,r.m2.id),r.d,t);a.set(e.toString(),e)})}}return a}