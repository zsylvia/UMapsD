!function(t,e){"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?module.exports=e():t.buckets=e()}(this,function(){"use strict";var t={};return t.defaultCompare=function(t,e){return e>t?-1:t===e?0:1},t.defaultEquals=function(t,e){return t===e},t.defaultToString=function(e){return null===e?"BUCKETS_NULL":t.isUndefined(e)?"BUCKETS_UNDEFINED":t.isString(e)?e:e.toString()},t.isFunction=function(t){return"function"==typeof t},t.isUndefined=function(t){return"undefined"==typeof t},t.isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},t.reverseCompareFunction=function(e){return t.isFunction(e)?function(t,n){return-1*e(t,n)}:function(t,e){return e>t?1:t===e?0:-1}},t.compareToEquals=function(t){return function(e,n){return 0===t(e,n)}},t.arrays={},t.arrays.indexOf=function(e,n,r){for(var i=r||t.defaultEquals,o=e.length,s=0;o>s;s++)if(i(e[s],n))return s;return-1},t.arrays.lastIndexOf=function(e,n,r){for(var i=r||t.defaultEquals,o=e.length,s=o-1;s>=0;s--)if(i(e[s],n))return s;return-1},t.arrays.contains=function(e,n,r){return t.arrays.indexOf(e,n,r)>=0},t.arrays.remove=function(e,n,r){var i=t.arrays.indexOf(e,n,r);return 0>i?!1:(e.splice(i,1),!0)},t.arrays.frequency=function(e,n,r){for(var i=r||t.defaultEquals,o=e.length,s=0,u=0;o>u;u++)i(e[u],n)&&s++;return s},t.arrays.equals=function(e,n,r){var i=r||t.defaultEquals;if(e.length!==n.length)return!1;for(var o=e.length,s=0;o>s;s++)if(!i(e[s],n[s]))return!1;return!0},t.arrays.copy=function(t){return t.concat()},t.arrays.swap=function(t,e,n){if(0>e||e>=t.length||0>n||n>=t.length)return!1;var r=t[e];return t[e]=t[n],t[n]=r,!0},t.arrays.forEach=function(t,e){for(var n=t.length,r=0;n>r;r++)if(e(t[r])===!1)return},t.LinkedList=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.LinkedList.prototype.add=function(e,n){if(t.isUndefined(n)&&(n=this.nElements),0>n||n>this.nElements||t.isUndefined(e))return!1;var r=this.createNode(e);if(0===this.nElements)this.firstNode=r,this.lastNode=r;else if(n===this.nElements)this.lastNode.next=r,this.lastNode=r;else if(0===n)r.next=this.firstNode,this.firstNode=r;else{var i=this.nodeAtIndex(n-1);r.next=i.next,i.next=r}return this.nElements++,!0},t.LinkedList.prototype.first=function(){return null!==this.firstNode?this.firstNode.element:void 0},t.LinkedList.prototype.last=function(){return null!==this.lastNode?this.lastNode.element:void 0},t.LinkedList.prototype.elementAtIndex=function(t){var e=this.nodeAtIndex(t);return null===e?void 0:e.element},t.LinkedList.prototype.indexOf=function(e,n){var r=n||t.defaultEquals;if(t.isUndefined(e))return-1;for(var i=this.firstNode,o=0;null!==i;){if(r(i.element,e))return o;o++,i=i.next}return-1},t.LinkedList.prototype.contains=function(t,e){return this.indexOf(t,e)>=0},t.LinkedList.prototype.remove=function(e,n){var r=n||t.defaultEquals;if(this.nElements<1||t.isUndefined(e))return!1;for(var i=null,o=this.firstNode;null!==o;){if(r(o.element,e))return o===this.firstNode?(this.firstNode=this.firstNode.next,o===this.lastNode&&(this.lastNode=null)):o===this.lastNode?(this.lastNode=i,i.next=o.next,o.next=null):(i.next=o.next,o.next=null),this.nElements--,!0;i=o,o=o.next}return!1},t.LinkedList.prototype.clear=function(){this.firstNode=null,this.lastNode=null,this.nElements=0},t.LinkedList.prototype.equals=function(e,n){var r=n||t.defaultEquals;return e instanceof t.LinkedList?this.size()!==e.size()?!1:this.equalsAux(this.firstNode,e.firstNode,r):!1},t.LinkedList.prototype.equalsAux=function(t,e,n){for(;null!==t;){if(!n(t.element,e.element))return!1;t=t.next,e=e.next}return!0},t.LinkedList.prototype.removeElementAtIndex=function(t){if(0>t||t>=this.nElements)return void 0;var e;if(1===this.nElements)e=this.firstNode.element,this.firstNode=null,this.lastNode=null;else{var n=this.nodeAtIndex(t-1);null===n?(e=this.firstNode.element,this.firstNode=this.firstNode.next):n.next===this.lastNode&&(e=this.lastNode.element,this.lastNode=n),null!==n&&(e=n.next.element,n.next=n.next.next)}return this.nElements--,e},t.LinkedList.prototype.forEach=function(t){for(var e=this.firstNode;null!==e&&t(e.element)!==!1;)e=e.next},t.LinkedList.prototype.reverse=function(){for(var t=null,e=this.firstNode,n=null;null!==e;)n=e.next,e.next=t,t=e,e=n;n=this.firstNode,this.firstNode=this.lastNode,this.lastNode=n},t.LinkedList.prototype.toArray=function(){for(var t=[],e=this.firstNode;null!==e;)t.push(e.element),e=e.next;return t},t.LinkedList.prototype.size=function(){return this.nElements},t.LinkedList.prototype.isEmpty=function(){return this.nElements<=0},t.LinkedList.prototype.nodeAtIndex=function(t){if(0>t||t>=this.nElements)return null;if(t===this.nElements-1)return this.lastNode;for(var e=this.firstNode,n=0;t>n;n++)e=e.next;return e},t.LinkedList.prototype.createNode=function(t){return{element:t,next:null}},t.Dictionary=function(e){this.table={},this.nElements=0,this.toStr=e||t.defaultToString},t.Dictionary.prototype.get=function(e){var n=this.table[this.toStr(e)];return t.isUndefined(n)?void 0:n.value},t.Dictionary.prototype.set=function(e,n){if(t.isUndefined(e)||t.isUndefined(n))return void 0;var r,i=this.toStr(e),o=this.table[i];return t.isUndefined(o)?(this.nElements++,r=void 0):r=o.value,this.table[i]={key:e,value:n},r},t.Dictionary.prototype.remove=function(e){var n=this.toStr(e),r=this.table[n];return t.isUndefined(r)?void 0:(delete this.table[n],this.nElements--,r.value)},t.Dictionary.prototype.keys=function(){var t=[];for(var e in this.table)this.table.hasOwnProperty(e)&&t.push(this.table[e].key);return t},t.Dictionary.prototype.values=function(){var t=[];for(var e in this.table)this.table.hasOwnProperty(e)&&t.push(this.table[e].value);return t},t.Dictionary.prototype.forEach=function(t){for(var e in this.table)if(this.table.hasOwnProperty(e)){var n=this.table[e],r=t(n.key,n.value);if(r===!1)return}},t.Dictionary.prototype.containsKey=function(e){return!t.isUndefined(this.get(e))},t.Dictionary.prototype.clear=function(){this.table={},this.nElements=0},t.Dictionary.prototype.size=function(){return this.nElements},t.Dictionary.prototype.isEmpty=function(){return this.nElements<=0},t.MultiDictionary=function(e,n){this.parent=new t.Dictionary(e),this.equalsF=n||t.defaultEquals},t.MultiDictionary.prototype.get=function(e){var n=this.parent.get(e);return t.isUndefined(n)?[]:t.arrays.copy(n)},t.MultiDictionary.prototype.set=function(e,n){if(t.isUndefined(e)||t.isUndefined(n))return!1;if(!this.containsKey(e))return this.parent.set(e,[n]),!0;var r=this.parent.get(e);return t.arrays.contains(r,n,this.equalsF)?!1:(r.push(n),!0)},t.MultiDictionary.prototype.remove=function(e,n){if(t.isUndefined(n)){var r=this.parent.remove(e);return t.isUndefined(r)?!1:!0}var i=this.parent.get(e);return t.arrays.remove(i,n,this.equalsF)?(0===i.length&&this.parent.remove(e),!0):!1},t.MultiDictionary.prototype.keys=function(){return this.parent.keys()},t.MultiDictionary.prototype.values=function(){for(var t=this.parent.values(),e=[],n=0;n<t.length;n++)for(var r=t[n],i=0;i<r.length;i++)e.push(r[i]);return e},t.MultiDictionary.prototype.containsKey=function(t){return this.parent.containsKey(t)},t.MultiDictionary.prototype.clear=function(){return this.parent.clear()},t.MultiDictionary.prototype.size=function(){return this.parent.size()},t.MultiDictionary.prototype.isEmpty=function(){return this.parent.isEmpty()},t.Heap=function(e){this.data=[],this.compare=e||t.defaultCompare},t.Heap.prototype.leftChildIndex=function(t){return 2*t+1},t.Heap.prototype.rightChildIndex=function(t){return 2*t+2},t.Heap.prototype.parentIndex=function(t){return Math.floor((t-1)/2)},t.Heap.prototype.minIndex=function(t,e){return e>=this.data.length?t>=this.data.length?-1:t:this.compare(this.data[t],this.data[e])<=0?t:e},t.Heap.prototype.siftUp=function(e){for(var n=this.parentIndex(e);e>0&&this.compare(this.data[n],this.data[e])>0;)t.arrays.swap(this.data,n,e),e=n,n=this.parentIndex(e)},t.Heap.prototype.siftDown=function(e){for(var n=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e));n>=0&&this.compare(this.data[e],this.data[n])>0;)t.arrays.swap(this.data,n,e),e=n,n=this.minIndex(this.leftChildIndex(e),this.rightChildIndex(e))},t.Heap.prototype.peek=function(){return this.data.length>0?this.data[0]:void 0},t.Heap.prototype.add=function(e){return t.isUndefined(e)?void 0:(this.data.push(e),this.siftUp(this.data.length-1),!0)},t.Heap.prototype.removeRoot=function(){if(this.data.length>0){var t=this.data[0];return this.data[0]=this.data[this.data.length-1],this.data.splice(this.data.length-1,1),this.data.length>0&&this.siftDown(0),t}return void 0},t.Heap.prototype.contains=function(e){var n=t.compareToEquals(this.compare);return t.arrays.contains(this.data,e,n)},t.Heap.prototype.size=function(){return this.data.length},t.Heap.prototype.isEmpty=function(){return this.data.length<=0},t.Heap.prototype.clear=function(){this.data.length=0},t.Heap.prototype.forEach=function(e){t.arrays.forEach(this.data,e)},t.Stack=function(){this.list=new t.LinkedList},t.Stack.prototype.push=function(t){return this.list.add(t,0)},t.Stack.prototype.add=function(t){return this.list.add(t,0)},t.Stack.prototype.pop=function(){return this.list.removeElementAtIndex(0)},t.Stack.prototype.peek=function(){return this.list.first()},t.Stack.prototype.size=function(){return this.list.size()},t.Stack.prototype.contains=function(t,e){return this.list.contains(t,e)},t.Stack.prototype.isEmpty=function(){return this.list.isEmpty()},t.Stack.prototype.clear=function(){this.list.clear()},t.Stack.prototype.forEach=function(t){this.list.forEach(t)},t.Queue=function(){this.list=new t.LinkedList},t.Queue.prototype.enqueue=function(t){return this.list.add(t)},t.Queue.prototype.add=function(t){return this.list.add(t)},t.Queue.prototype.dequeue=function(){if(0!==this.list.size()){var t=this.list.first();return this.list.removeElementAtIndex(0),t}return void 0},t.Queue.prototype.peek=function(){return 0!==this.list.size()?this.list.first():void 0},t.Queue.prototype.size=function(){return this.list.size()},t.Queue.prototype.contains=function(t,e){return this.list.contains(t,e)},t.Queue.prototype.isEmpty=function(){return this.list.size()<=0},t.Queue.prototype.clear=function(){this.list.clear()},t.Queue.prototype.forEach=function(t){this.list.forEach(t)},t.PriorityQueue=function(e){this.heap=new t.Heap(t.reverseCompareFunction(e))},t.PriorityQueue.prototype.enqueue=function(t){return this.heap.add(t)},t.PriorityQueue.prototype.add=function(t){return this.heap.add(t)},t.PriorityQueue.prototype.dequeue=function(){if(0!==this.heap.size()){var t=this.heap.peek();return this.heap.removeRoot(),t}return void 0},t.PriorityQueue.prototype.peek=function(){return this.heap.peek()},t.PriorityQueue.prototype.contains=function(t){return this.heap.contains(t)},t.PriorityQueue.prototype.isEmpty=function(){return this.heap.isEmpty()},t.PriorityQueue.prototype.size=function(){return this.heap.size()},t.PriorityQueue.prototype.clear=function(){this.heap.clear()},t.PriorityQueue.prototype.forEach=function(t){this.heap.forEach(t)},t.Set=function(e){this.dictionary=new t.Dictionary(e)},t.Set.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.Set.prototype.add=function(e){return this.contains(e)||t.isUndefined(e)?!1:(this.dictionary.set(e,e),!0)},t.Set.prototype.intersection=function(t){var e=this;this.forEach(function(n){t.contains(n)||e.remove(n)})},t.Set.prototype.union=function(t){var e=this;t.forEach(function(t){e.add(t)})},t.Set.prototype.difference=function(t){var e=this;t.forEach(function(t){e.remove(t)})},t.Set.prototype.isSubsetOf=function(t){if(this.size()>t.size())return!1;var e=!0;return this.forEach(function(n){return t.contains(n)?void 0:(e=!1,!1)}),e},t.Set.prototype.remove=function(t){return this.contains(t)?(this.dictionary.remove(t),!0):!1},t.Set.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){return t(n)})},t.Set.prototype.toArray=function(){return this.dictionary.values()},t.Set.prototype.isEmpty=function(){return this.dictionary.isEmpty()},t.Set.prototype.size=function(){return this.dictionary.size()},t.Set.prototype.clear=function(){this.dictionary.clear()},t.Bag=function(e){this.toStrF=e||t.defaultToString,this.dictionary=new t.Dictionary(this.toStrF),this.nElements=0},t.Bag.prototype.add=function(e,n){if((isNaN(n)||t.isUndefined(n))&&(n=1),t.isUndefined(e)||0>=n)return!1;if(this.contains(e))this.dictionary.get(e).copies+=n;else{var r={value:e,copies:n};this.dictionary.set(e,r)}return this.nElements+=n,!0},t.Bag.prototype.count=function(t){return this.contains(t)?this.dictionary.get(t).copies:0},t.Bag.prototype.contains=function(t){return this.dictionary.containsKey(t)},t.Bag.prototype.remove=function(e,n){if((isNaN(n)||t.isUndefined(n))&&(n=1),t.isUndefined(e)||0>=n)return!1;if(this.contains(e)){var r=this.dictionary.get(e);return this.nElements-=n>r.copies?r.copies:n,r.copies-=n,r.copies<=0&&this.dictionary.remove(e),!0}return!1},t.Bag.prototype.toArray=function(){for(var t=[],e=this.dictionary.values(),n=e.length,r=0;n>r;r++)for(var i=e[r],o=i.value,s=i.copies,u=0;s>u;u++)t.push(o);return t},t.Bag.prototype.toSet=function(){for(var e=new t.Set(this.toStrF),n=this.dictionary.values(),r=n.length,i=0;r>i;i++){var o=n[i].value;e.add(o)}return e},t.Bag.prototype.forEach=function(t){this.dictionary.forEach(function(e,n){for(var r=n.value,i=n.copies,o=0;i>o;o++)if(t(r)===!1)return!1;return!0})},t.Bag.prototype.size=function(){return this.nElements},t.Bag.prototype.isEmpty=function(){return 0===this.nElements},t.Bag.prototype.clear=function(){this.nElements=0,this.dictionary.clear()},t.BSTree=function(e){this.root=null,this.compare=e||t.defaultCompare,this.nElements=0},t.BSTree.prototype.add=function(e){return t.isUndefined(e)?!1:null!==this.insertNode(this.createNode(e))?(this.nElements++,!0):!1},t.BSTree.prototype.clear=function(){this.root=null,this.nElements=0},t.BSTree.prototype.isEmpty=function(){return 0===this.nElements},t.BSTree.prototype.size=function(){return this.nElements},t.BSTree.prototype.contains=function(e){return t.isUndefined(e)?!1:null!==this.searchNode(this.root,e)},t.BSTree.prototype.remove=function(t){var e=this.searchNode(this.root,t);return null===e?!1:(this.removeNode(e),this.nElements--,!0)},t.BSTree.prototype.inorderTraversal=function(t){this.inorderTraversalAux(this.root,t,{stop:!1})},t.BSTree.prototype.preorderTraversal=function(t){this.preorderTraversalAux(this.root,t,{stop:!1})},t.BSTree.prototype.postorderTraversal=function(t){this.postorderTraversalAux(this.root,t,{stop:!1})},t.BSTree.prototype.levelTraversal=function(t){this.levelTraversalAux(this.root,t)},t.BSTree.prototype.minimum=function(){return this.isEmpty()?void 0:this.minimumAux(this.root).element},t.BSTree.prototype.maximum=function(){return this.isEmpty()?void 0:this.maximumAux(this.root).element},t.BSTree.prototype.forEach=function(t){this.inorderTraversal(t)},t.BSTree.prototype.toArray=function(){var t=[];return this.inorderTraversal(function(e){t.push(e)}),t},t.BSTree.prototype.height=function(){return this.heightAux(this.root)},t.BSTree.prototype.searchNode=function(t,e){for(var n=null;null!==t&&0!==n;)n=this.compare(e,t.element),0>n?t=t.leftCh:n>0&&(t=t.rightCh);return t},t.BSTree.prototype.transplant=function(t,e){null===t.parent?this.root=e:t===t.parent.leftCh?t.parent.leftCh=e:t.parent.rightCh=e,null!==e&&(e.parent=t.parent)},t.BSTree.prototype.removeNode=function(t){if(null===t.leftCh)this.transplant(t,t.rightCh);else if(null===t.rightCh)this.transplant(t,t.leftCh);else{var e=this.minimumAux(t.rightCh);e.parent!==t&&(this.transplant(e,e.rightCh),e.rightCh=t.rightCh,e.rightCh.parent=e),this.transplant(t,e),e.leftCh=t.leftCh,e.leftCh.parent=e}},t.BSTree.prototype.inorderTraversalAux=function(t,e,n){null===t||n.stop||(this.inorderTraversalAux(t.leftCh,e,n),n.stop||(n.stop=e(t.element)===!1,n.stop||this.inorderTraversalAux(t.rightCh,e,n)))},t.BSTree.prototype.levelTraversalAux=function(e,n){var r=new t.Queue;for(null!==e&&r.enqueue(e);!r.isEmpty();){if(e=r.dequeue(),n(e.element)===!1)return;null!==e.leftCh&&r.enqueue(e.leftCh),null!==e.rightCh&&r.enqueue(e.rightCh)}},t.BSTree.prototype.preorderTraversalAux=function(t,e,n){null===t||n.stop||(n.stop=e(t.element)===!1,n.stop||(this.preorderTraversalAux(t.leftCh,e,n),n.stop||this.preorderTraversalAux(t.rightCh,e,n)))},t.BSTree.prototype.postorderTraversalAux=function(t,e,n){null===t||n.stop||(this.postorderTraversalAux(t.leftCh,e,n),n.stop||(this.postorderTraversalAux(t.rightCh,e,n),n.stop||(n.stop=e(t.element)===!1)))},t.BSTree.prototype.minimumAux=function(t){for(;null!==t.leftCh;)t=t.leftCh;return t},t.BSTree.prototype.maximumAux=function(t){for(;null!==t.rightCh;)t=t.rightCh;return t},t.BSTree.prototype.successorNode=function(t){if(null!==t.rightCh)return this.minimumAux(t.rightCh);for(var e=t.parent;null!==e&&t===e.rightCh;)t=e,e=t.parent;return e},t.BSTree.prototype.heightAux=function(t){return null===t?-1:Math.max(this.heightAux(t.leftCh),this.heightAux(t.rightCh))+1},t.BSTree.prototype.insertNode=function(t){for(var e=null,n=this.root,r=null;null!==n;){if(r=this.compare(t.element,n.element),0===r)return null;0>r?(e=n,n=n.leftCh):(e=n,n=n.rightCh)}return t.parent=e,null===e?this.root=t:this.compare(t.element,e.element)<0?e.leftCh=t:e.rightCh=t,t},t.BSTree.prototype.createNode=function(t){return{element:t,leftCh:null,rightCh:null,parent:null}},t});